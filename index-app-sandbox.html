<!DOCTYPE html>
<html>
  <head>
    <title>Asterias App</title>
    <link rel="stylesheet" href="./lib/styles/w3.css">
    
    <!-- Vendors -->
    <script src="node_modules/p5/lib/p5.min.js"></script>
    <script src="node_modules/p5/lib/addons/p5.dom.js"></script>    
    <script src="node_modules/lodash/lodash.min.js"></script>
    <script src="lib/redux.min.js"></script>

    <!-- assertions -->    
    <script src="lib/expect.min.js"></script>
    
    <!-- my utils -->
    <script src="./src/scripts/modules/util.js"></script>
    
    <!-- asterias modules -->
    <script src="./src/scripts/modules/gene.js"></script>
    <script src="./src/scripts/modules/organism.js"></script>
    <script src="./src/scripts/modules/asterias.js"></script>      
    <script src="./src/scripts/modules/fitness.js"></script>      
    <script src="./src/scripts/modules/geneticAlgorithm.js"></script>      
    
    <!-- asterias ducks -->
    <script src="./src/scripts/ducks/simulation.js"></script>      
    
    <!-- UI modules -->
    <script src="./src/scripts/modules/ui/grid.js"></script>
    
    <!-- asterias components -->
    <script src="./src/scripts/components/asteiasGrid.js"></script>
    <script src="./src/scripts/components/asteriasComponent.js"></script>
    <script src="./src/scripts/components/asteriasContainer.js"></script>
    
    <style>
        #sketch { position:relative; width: 600px; height: 500px;}
    </style>
  </head>
  <body class="w3-container">
    <main class="w3-section w3-grey" style="position:relative">
       
        <div id="sketch" class="w3-green">
          
        </div>
    </main>
    
    <script src="src/scripts/app/app.js"></script>
    
    <script>
        var canvas        
//        var comp = asteriasComponent({id:'test1'},
//                                          {size: 200,
//                                          point: 15,
//                                          pointiness: .5,
//                                          ring: 9,
//                                          shadow: 50,
//                                          brightness: 100,
//                                          nucleus: .25,
//                                          twisty: 15,
//                                          coil: .8,
//                                          color: 0})
        var astcomp = asteriasComponent({id:'test1'},
                                          {size: 50 + Math.random()*50,
                                          point: 15,
                                          pointiness: .5,
                                          ring: 9,
                                          shadow: 50,
                                          brightness: 100,
                                          nucleus: .25,
                                          twisty: 15,
                                          coil: .8,
                                          color: 0})

//        var astProps = 
        
        var randomSizeAstFactory = (function(){
            var defaults = {point: 15, pointiness: .5, ring: 9, shadow: 50,
          brightness: 100, nucleus: .25, twisty: 15, coil: .8,
          color: 0};
            
           return function() {
               var size = Math.random()*90 + 10;
               return asteriasComponent({id:'' + Math.random()},
                                        Object.assign(defaults,{size:size})
                                       )
           } 
        }());
        
//        var comp = asteriasContainer(null,astcomp)
        var comp = asteriasContainer(null,astcomp)
        
        
        var grid = asteriasGrid({children: _.times(8, randomSizeAstFactory),
                                 rows: 3,
                                 cols: 3,
                                 width: 600,
                                 height: 500,
                                 center: true
                                })
        
        function setup(){
            colorMode(HSB);
            canvas = createCanvas(600,500);
            canvas.parent("sketch")
            background(200);
            grid.render();
//            translate(300,250);
//            comp.render();
        }
        
//        function draw(){
//            background(200)
//            fill('yellow')
//            rect(100,100,50,50);
//        }
    </script>
  </body>
</html>
